{"is_source_file": true, "format": "Python (SQLAlchemy ORM models)", "description": "This file defines ORM models for a backend video streaming application, including user, video, and refresh token models, with associated enums and mixins for timestamp management.", "external_files": ["src/db/base.py"], "external_methods": ["func.now()"], "published": ["User", "Video", "RefreshToken", "UserRole", "VideoVisibility", "TimestampMixin"], "classes": [{"name": "UserRole", "description": "Enumeration for user roles (e.g., user, admin)."}, {"name": "VideoVisibility", "description": "Enumeration for video visibility states (private, unlisted, public)."}, {"name": "TimestampMixin", "description": "Mixin adding created_at and updated_at timestamp columns."}, {"name": "User", "description": "Represents a registered user with attributes like email, password_hash, role, and relationships to videos and tokens."}, {"name": "Video", "description": "Represents metadata of an uploaded video such as title, description, filepath, url, duration, size, mime type, visibility, and uploader relationship."}, {"name": "RefreshToken", "description": "Represents a JWT refresh token associated with a user, with expiration and revocation status."}], "methods": [], "calls": ["func.now()"], "search-terms": ["SQLAlchemy ORM models", "VideoVisibility Enum", "UserRole Enum", "TimestampMixin", "video metadata model", "refresh token model", "user model", "relationship", "mapped_column"], "state": 2, "file_id": 7, "knowledge_revision": 24, "git_revision": "0595ebafec38f209bff414f0da949afa9274f12c", "ctags": [{"_type": "tag", "name": "ADMIN", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    ADMIN = \"admin\"$/", "language": "Python", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "PRIVATE", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    PRIVATE = \"private\"$/", "language": "Python", "kind": "variable", "scope": "VideoVisibility", "scopeKind": "class"}, {"_type": "tag", "name": "PUBLIC", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    PUBLIC = \"public\"$/", "language": "Python", "kind": "variable", "scope": "VideoVisibility", "scopeKind": "class"}, {"_type": "tag", "name": "RefreshToken", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class RefreshToken(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TimestampMixin", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class TimestampMixin:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UNLISTED", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    UNLISTED = \"unlisted\"$/", "language": "Python", "kind": "variable", "scope": "VideoVisibility", "scopeKind": "class"}, {"_type": "tag", "name": "USER", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    USER = \"user\"$/", "language": "Python", "kind": "variable", "scope": "UserRole", "scopeKind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class User(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserRole", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class UserRole(str, enum.Enum):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Video", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class Video(Base, TimestampMixin):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "VideoVisibility", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^class VideoVisibility(str, enum.Enum):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"refresh_tokens\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    __tablename__ = \"videos\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    created_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "TimestampMixin", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    description: Mapped[str | None] = mapped_column(Text, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[str | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "duration_seconds", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    duration_seconds: Mapped[int | None] = mapped_column(Integer, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[int | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    email: Mapped[str] = mapped_column(String(320), unique=True, index=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "expires_at", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    expires_at: Mapped[datetime] = mapped_column(DateTime(timezone=True), nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "filepath", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    filepath: Mapped[str | None] = mapped_column(String(1024), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[str | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    id: Mapped[int] = mapped_column(Integer, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "is_active", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    is_active: Mapped[bool] = mapped_column(Boolean, nullable=False, default=True)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "mime_type", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    mime_type: Mapped[str | None] = mapped_column(String(100), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[str | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "password_hash", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    password_hash: Mapped[bytes] = mapped_column(LargeBinary, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[bytes]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "refresh_tokens", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    refresh_tokens: Mapped[list[\"RefreshToken\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[list[\"RefreshToken\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "revoked", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    revoked: Mapped[bool] = mapped_column(Boolean, nullable=False, default=False)$/", "language": "Python", "typeref": "typename:Mapped[bool]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    role: Mapped[UserRole] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[UserRole]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "size_bytes", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    size_bytes: Mapped[int | None] = mapped_column(Integer, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[int | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    title: Mapped[str] = mapped_column(String(200), nullable=False, index=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    token: Mapped[str] = mapped_column(String(512), unique=True, index=True, nullable=False)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    updated_at: Mapped[datetime] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[datetime]", "kind": "variable", "scope": "TimestampMixin", "scopeKind": "class"}, {"_type": "tag", "name": "uploader", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    uploader: Mapped[User | None] = relationship(back_populates=\"videos\")$/", "language": "Python", "typeref": "typename:Mapped[User | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "uploader_id", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    uploader_id: Mapped[int] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    url: Mapped[str | None] = mapped_column(String(2048), nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[str | None]", "kind": "variable", "scope": "Video", "scopeKind": "class"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    user: Mapped[User] = relationship(back_populates=\"refresh_tokens\")$/", "language": "Python", "typeref": "typename:Mapped[User]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    user_id: Mapped[int] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[int]", "kind": "variable", "scope": "RefreshToken", "scopeKind": "class"}, {"_type": "tag", "name": "videos", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    videos: Mapped[list[\"Video\"]] = relationship($/", "language": "Python", "typeref": "typename:Mapped[list[\"Video\"]]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "visibility", "path": "/home/kavia/workspace/code-generation/streamview-platform-307320-307329/video_streaming_backend/src/db/models.py", "pattern": "/^    visibility: Mapped[VideoVisibility] = mapped_column($/", "language": "Python", "typeref": "typename:Mapped[VideoVisibility]", "kind": "variable", "scope": "Video", "scopeKind": "class"}], "hash": "735e8f5f5b387c655ab9ca16b5790c4e", "format-version": 4, "code-base-name": "video_streaming_backend", "filename": "video_streaming_backend/src/db/models.py", "fields": [{"name": "ADMIN = \"admin\"", "scope": "UserRole", "scopeKind": "class", "description": "unavailable"}, {"name": "PRIVATE = \"private\"", "scope": "VideoVisibility", "scopeKind": "class", "description": "unavailable"}, {"name": "PUBLIC = \"public\"", "scope": "VideoVisibility", "scopeKind": "class", "description": "unavailable"}, {"name": "UNLISTED = \"unlisted\"", "scope": "VideoVisibility", "scopeKind": "class", "description": "unavailable"}, {"name": "USER = \"user\"", "scope": "UserRole", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"refresh_tokens\"", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"videos\"", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] created_at", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str | None] description", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int | None] duration_seconds", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] expires_at", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str | None] filepath", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] id", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] is_active", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str | None] mime_type", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bytes] password_hash", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[list[\"RefreshToken\"]] refresh_tokens", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[bool] revoked", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[UserRole] role", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int | None] size_bytes", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] title", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] token", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[datetime] updated_at", "scope": "TimestampMixin", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[User | None] uploader", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] uploader_id", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str | None] url", "scope": "Video", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[User] user", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[int] user_id", "scope": "RefreshToken", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[list[\"Video\"]] videos", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[VideoVisibility] visibility", "scope": "Video", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"24": "0595ebafec38f209bff414f0da949afa9274f12c"}]}